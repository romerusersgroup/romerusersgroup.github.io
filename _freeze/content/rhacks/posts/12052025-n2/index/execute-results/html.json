{
  "hash": "6d0bb034f5a5b39101045aa121751089",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"R Hack ‚Äì Getting started with maps in R using GeoJSON and library sf\"\nsubtitle: \"A simple workflow to load and plot maps in R\"\ndescription: \"R-Hacks N.2\"\nauthor: \"Lucio Colonna\"\ndate: \"05 December 2025\"\nimages: \"images/image-1.png\"\nseries: R-Hacks\ncategories:\n  - GeoJSON\n  - ggplot\n  - sf\n  - maps\nlayout: single\ntoc-location: left\ntoc: true\ncode-overflow: wrap\nexecute: \n  warning: false\n  message: false\n---\n\n*This hack is based on my Cyclistic analysis on Kaggle (see Chapter **8.12.4**):*  \nüîó <https://www.kaggle.com/code/lcolon/cyclistic-2023-google-da-capstone-project-r>\n\nWorking with maps in R is easier than it seems.  \nIf you want to visualize points, regions, or spatial patterns, the combination of **GeoJSON files** and the **`sf`** package gives you a simple and modern workflow.\n\nIn this hack, we‚Äôll load a real city map (Chicago) directly from a URL, plot it with `geom_sf()`, and overlay simple point data.\n\n---\n\n## Step 0 ‚Äì What is a GeoJSON file?\n\nA **GeoJSON** file is a **JSON text file** that stores **geographic shapes** (points, lines, polygons), together with their **attributes** (names, boundaries, codes, etc.).\n\nIt is one of the most common formats for open geographic data because it is **lightweight, human-readable, and web-friendly**.\n\nYou can often find GeoJSON files on:\n\n- city open data portals (City of Chicago, NYC Open Data, etc.)  \n- national and international platforms (e.g., data.gov)  \n- GitHub repositories  \n- many public mapping resources\n\n---\n\n## Step 1 ‚Äì Load the required packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(sf)       # for spatial data (simple features)\nlibrary(ggplot2)  # for plotting\n```\n:::\n\n\n---\n\n## Step 2 ‚Äì Read a GeoJSON map with `sf::st_read()`\n\nIn this hack, we use a **GeoJSON of Chicago community areas**, provided by the [City of Chicago Open Data Portal](https://data.cityofchicago.org/Facilities-Geographic-Boundaries/Boundaries-Neighborhoods/bbvz-uum9).\n\n*‚ö†Ô∏è Before using any online map or dataset, always remember to check the terms of use of the source.*\n\nYou can read a GeoJSON directly from a URL, without downloading anything manually:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmap_of_chicago <- sf::st_read(\n  \"https://data.cityofchicago.org/resource/y6yq-dbs2.geojson\",\n  quiet = TRUE\n  )\n\nhead(map_of_chicago)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSimple feature collection with 6 features and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -87.74141 ymin: 41.80189 xmax: -87.60641 ymax: 41.93272\nGeodetic CRS:  WGS 84\n           pri_neigh          sec_neigh    shape_area    shape_len\n1    Grand Boulevard        BRONZEVILLE 48492503.1554 28196.837157\n2       Printers Row       PRINTERS ROW 2162137.97139  6864.247156\n3      United Center      UNITED CENTER 32520512.7053 23101.363745\n4 Sheffield & DePaul SHEFFIELD & DEPAUL 10482592.2987 13227.049745\n5      Humboldt Park      HUMBOLDT PARK 125010425.593 46126.751351\n6      Garfield Park      GARFIELD PARK 89976069.5947  44460.91922\n                        geometry\n1 MULTIPOLYGON (((-87.60671 4...\n2 MULTIPOLYGON (((-87.62761 4...\n3 MULTIPOLYGON (((-87.66707 4...\n4 MULTIPOLYGON (((-87.65833 4...\n5 MULTIPOLYGON (((-87.7406 41...\n6 MULTIPOLYGON (((-87.6954 41...\n```\n\n\n:::\n:::\n\n\n---\n\nWhat you get:\n\n- `map_of_chicago` is an sf object -essentially a data frame with a special geometry column where each row is a polygon that represents one community area\n\n---\n\n## Step 3 ‚Äì Plot a basic map with `geom_sf()`\n\nOnce the GeoJSON file has been loaded into an sf object, you can visualize it with `geom_sf()`.\n\n`geom_sf()` is the ggplot2 layer designed specifically for spatial data: it knows how to read the geometry column of an sf object and automatically draw points, lines, or polygons depending on what the data contains.\nIn our case, it will draw the polygons of Chicago‚Äôs community areas.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = map_of_chicago, \n          fill = \"#f1f0f0\", color = \"grey50\") +\n  labs(title = \"Chicago community areas\",\n       subtitle = \"GeoJSON map loaded with sf::st_read()\") +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n---\n\n# Step 4 ‚Äì Add your own data on top of the map\n\nIf you have a dataset with latitude/longitude, you can overlay it on the map.\n\nFor example, let‚Äôs create a small dummy dataset of bike sharing station locations:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstations <- data.frame(\n  start_lng = c(\n    -87.6278, -87.6560, -87.6705, -87.6045, -87.5950,\n    -87.6850, -87.6515, -87.7080, -87.6405, -87.5600),\n  start_lat = c(\n    41.8925, 41.9000, 41.9120, 41.8560, 41.7920,\n    41.9220, 41.9250, 41.8810, 41.9410, 41.7600)\n  )\n\nstations\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   start_lng start_lat\n1   -87.6278   41.8925\n2   -87.6560   41.9000\n3   -87.6705   41.9120\n4   -87.6045   41.8560\n5   -87.5950   41.7920\n6   -87.6850   41.9220\n7   -87.6515   41.9250\n8   -87.7080   41.8810\n9   -87.6405   41.9410\n10  -87.5600   41.7600\n```\n\n\n:::\n:::\n\n\nNow we can plot the base map plus the stations:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = map_of_chicago, \n          fill = \"#f1f0f0\", color = \"grey70\") +\n  geom_point(data = stations,\n             aes(x = start_lng, y = start_lat),\n             color = \"red\",\n             size = 3) +\n  labs(title = \"Bike stations on top of a GeoJSON map of Chicago\",\n       subtitle = \"Base map: Chicago community areas (GeoJSON + sf)\") +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n\n---\n\n## To Recap\n\n- GeoJSON = JSON file with geometry + attributes\n\n- Load it directly from a URL with `sf::st_read()`\n\n- Plot it with `geom_sf()`\n\n- Add your own points using regular ggplot layers\n\n- This workflow is simple, beginner-friendly, and requires no GIS tools\n\n<br>\n\n**Thanks for reading!**\n\n::: callout-tip\nIf you want to stay up to date with the latest events from the **Rome R Users Group**, click here:\n\nüëâ <https://www.meetup.com/rome-r-users-group/>\n\nAnd if you are curious, the full Kaggle notebook used for this tip is available here:\n\nüîó <https://www.kaggle.com/code/lcolon/cyclistic-2023-google-da-capstone-project-r>\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}