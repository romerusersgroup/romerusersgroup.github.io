{
  "hash": "da4090ea35e7ecfd5299a804de244935",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"How to Add Images to ggplot Axes Using `ggtext::element_markdown()`\"\nsubtitle: \"A practical guide for adding logos, icons, and flags to your plots\"\ndescription: \"R-Hacks\"\nauthor: \"Lucio Colonna\"\ndate: \"19 November 2025\"\nimages: \"images/image-1.png\"\nseries: R-Hacks\ncategories:\n  - ggtext\n  - ggplot\nlayout: single\ntoc-location: left\ntoc: true\ncode-overflow: wrap\nexecute: \n  warning: false\n  message: false\n---\n\n## \n\n*This tip is based on a full **Kaggle notebook**, where this technique is applied in a complete **Exploratory Data Analysis (EDA)**: ðŸ”— <https://www.kaggle.com/code/lcolon/football-2023-2024-eda-and-pa-with-logos>*\n\n> **Have you ever needed to show logos, icons, or flags directly on the axes of your ggplot charts?**\n\nYou can do this using the `element_markdown()` function from the **{ggtext}** package!\n\n`element_markdown()` is a function that tells `ggplot` to treat labels as HTML instead of plain text. It must be used in the `theme()` section of your ggplot code.\n\nThe chart below shows an example where league logos appear directly on the x-axis. It displays the total number of goals scored in the major **European football leagues during the 2023/2024 season**:\n\n<center>\n\n![European football leagues 2023/2024](images/image-1.png){width=\"60%\"}\n\n</center>\n\n## Exploratory Data Analysis Workflow\n\nHere is a short, practical guide showing how to recreate this plot.\n\n### Step 0: Start from a basic dataframe\n\nIn most real situations you will already have a dataframe to work with. Here is the one used in this example:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- data.frame(\n  league = c(\"Premier League\", \"La Liga\", \n             \"Serie A\", \"Bundesliga\", \"Ligue 1\"),\n  goals  = c(1197, 977, 968, 960, 804))\n\ndf\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n          league goals\n1 Premier League  1197\n2        La Liga   977\n3        Serie A   968\n4     Bundesliga   960\n5        Ligue 1   804\n```\n\n\n:::\n:::\n\n\n### Step 1: Choose the images you want to display (PNG recommended)\n\nFirst decide which images you want to show on your `ggplot` axis. In this example I am using online image **URLs** (including links from **Wikimedia**), but you can use any source that provides a direct image URL, such as files hosted on **GitHub repos** or any public static hosting service. Just make sure the image format is supported â€” typically **PNG** or **JPG/JPEG**.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Define image URLs as variables\npremier_url <- \"https://upload.wikimedia.org/wikipedia/it/6/6d/Premier_League_Logo_2016.png\"\nlaliga_url <- \"https://upload.wikimedia.org/wikipedia/it/9/9b/LFP_La_Liga.png\"\nseriea_url <- \"https://www.fifplay.com/img/public/serie-a-logo.png\"\nbundes_url <- \"https://www.fifplay.com/img/public/bundesliga-logo.png\"\nligue1_url <- \"https://upload.wikimedia.org/wikipedia/commons/a/a0/Ligue_1_2024_Logo.png\"\n```\n:::\n\n\n### Step 2: Add a column with HTML <img /> tags\n\nIn order to display images on the axis, each image URL must be **wrapped inside an HTML <img /> tag**. This simply means that the URL cannot appear alone â€” it must be placed *inside* the structure:\n\n    `<img src= + image_url + width='45'/>`\n\n\n*Please note that in this example I use width='45' just as a reference size, but you can choose any value depending on how big you want the image to appear in your plot.*\n\nLet's add the column to the df:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf$logo <- c(\n  paste0(\"<img src='\", premier_url, \"' width='45'/>\"), \n  paste0(\"<img src='\", laliga_url, \"' width='45'/>\"), \n  paste0(\"<img src='\", seriea_url, \"' width='45'/>\"), \n  paste0(\"<img src='\", bundes_url, \"' width='45'/>\"), \n  paste0(\"<img src='\", ligue1_url, \"' width='45'/>\")\n  )\n```\n:::\n\n\nAt this point, the dataframe should look like this:\n\n<br>\n\n| league | goals | logo |\n|-------------|-------------|-----------------------------------------------|\n| Premier League | 1197 | `<img src='https://upload.wikimedia.org/wikipedia/it/6/6d/Premier_League_Logo_2016.png' width='45'/>` |\n| La Liga | 977 | `<img src='https://upload.wikimedia.org/wikipedia/it/9/9b/LFP_La_Liga.png' width='45'/>` |\n| Serie A | 968 | `<img src='https://www.fifplay.com/img/public/serie-a-logo.png' width='45'/>` |\n| Bundesliga | 960 | `<img src='https://www.fifplay.com/img/public/bundesliga-logo.png' width='45'/>` |\n| Ligue 1 | 804 | `<img src='https://upload.wikimedia.org/wikipedia/commons/a/a0/Ligue_1_2024_Logo.png' width='45'/>` |\n\n<br>\n\n### Step 3: Plot your data!\n\nNow that the dataframe contains a column of HTML <img /> tags, we can use it directly on the x-axis. The key part is here:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntheme( axis.text.x = element_markdown() )\n```\n:::\n\n\n`element_markdown()` function is what allows `ggplot` to interpret the HTML in your axis labels. Without it, `ggplot` would show the literal string `<img src='...'>` as plain text. With it, the `<img>` tags are rendered as actual images.\n\nHere is the full plotting code:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(ggtext)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\noptions(repr.plot.width = 6, \n        repr.plot.height = 7, \n        warn = -1)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(df, \n       aes(x = reorder(logo, -goals), y = goals)) + \n  geom_col(fill = \"forestgreen\", width = .8) +\n  geom_text(aes(label = goals), vjust = -0.5, size = 4.5) + \n  labs(title = \"\\nFootball stats 2023/2024\",\n       subtitle = \"Total Goals scored in each League\\n\" ) + \n  theme_minimal(14) +\n  # HTML rendering happens here!!\n  theme(axis.text.x = ggtext::element_markdown(), \n         axis.text.y = element_blank(), \n         panel.grid = element_blank(), \n         axis.title = element_blank(), \n         plot.title = element_text(face = \"bold\", \n                                   colour = \"blue\", hjust = 0.05), \n         plot.subtitle= element_text(hjust = 0.05)\n         )\n```\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\nWith `element_markdown()` applied to `axis.text.x`, ggplot correctly displays the league logos instead of plain text labels, as seen in the barchart above.\n\n### To Recap\n\n1.  Prepare your dataframe (existing or new)\n2.  Choose your images (PNG recommended) and store their URLs\n3.  Wrap each URL inside an HTML tag with a defined width\n4.  Add this HTML column to your dataframe\n5.  Map it to the ggplot axis\n6.  Enable HTML rendering in plot theme using:\n\n\n::: {.cell}\n\n```{.r .cell-code}\naxis.text.x = ggtext::element_markdown()\n```\n:::\n\n\n**Thanks for reading!**\n\n::: callout-tip\nIf you want to stay up to date with the latest events from the **Rome R Users Group**, click here:\\\nðŸ‘‰<https://www.meetup.com/rome-r-users-group/>\n\nAnd if you are curious, the full Kaggle notebook used for this tip is available here: ðŸ”—<https://www.kaggle.com/code/lcolon/football-2023-2024-eda-and-pa-with-logos>\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}